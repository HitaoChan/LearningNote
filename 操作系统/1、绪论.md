# 1、操作系统的基本概念

## 1.1、冯诺依曼模型与计算机系统

> **冯诺依曼模型：**
>
> ![image-20200909203334439](https://gitee.com/HaitoChan/upload-pic-typora/raw/master/null/image-20200909203334439.png)
>
> > 主机部分：控制器、存储器、运算器
> >
> > 外设部分：输出设备、输入设备
>
> 
>
> <img src="https://gitee.com/HaitoChan/upload-pic-typora/raw/master/null/image-20200909203728666.png" alt="image-20200909203728666" style="zoom:80%;" />	
>
> **操作系统：**
>
> >  操作系统是裸机上的第一层软件，是对硬件功能的首次扩充
> >
> >  引入的目的：提供一个计算机用户与计算机硬件系统的**接口**，使计算机更易使用；有效地**控制和管理**计算机系统中的各种硬件和软件资源，使之得到更有效的利用；合理地组织计算机系统的工作流程，以改善系统性能。

## 1.2、操作系统的概念

> **用户观点**
>
> > 根据用户所使用计算机的不同而设计不同类型的操作系统
>
> **系统观点（资源管理的观点）**
>
> > 操作系统是计算机系统的资源管理程序
> >
> > 计算机系统中有两类资源：硬件资源和软件资源
> >
> > 按作用分四大类：处理器、存储器、外设和信息（程序和数据）
> >
> > 与上述四类资源对应：处理起管理、存储器管理、设备管理和信息管理（文件系统）
>
> **进程观点**
>
> > 看作若干个可以独立运行的程序和一个对这些程序进行协调的核心的组成。
> >
> > 进程：运行的程序
> >
> > 两大类进程：用户进程和系统进程
>
> **虚拟机观点**
>
> > 也成为机器扩充的观点
> >
> > 操作系统为用户使用计算机提供了许多服务功能和良好的工作环境

## 1.3、操作系统的特征

> 4个基本特征
>
> > **并发性**
> >
> > > **并行性是指多个或两个事件在同一个时刻发生，并发性是指两个或多个时间在同一个时间间隔发生。**
> > >
> > > 程序的并发执行能有效改善系统的资源利用率，但会使系统复杂化，因此操作系统必须具有控制和管理各种并发活动的能力
> >
> > **共享性**
> >
> > > **并发性和共享性是操作系统最基本的特征**，两者互为存在条件。
> > >
> > > 资源共享是指系统中的硬件和软件资源不再为某个程序独占，而是供多个用户共同使用。
> > >
> > > **两种资源共享方式**
> > >
> > > > 互斥共享：打印机、队列、某些变量等一段时间内只能供一个作业使用的资源
> > > >
> > > > 同时访问：如磁盘、代码等，宏观上是同时的，微观上可能是作业交替访问该资源
> >
> > **虚拟性**
> >
> > > 把一个物理上的实体变为若干个逻辑上的对应物
> >
> > **异步性**
> >
> > > 异步性是指进程以不可预知的速度向前推进。 内存中的每个进程何时执行,何时暂停,以怎样的速度向前推进,每道程序总共需要多少时间才能完成等,都是不可预知的。 是程序并发执行时，程序之间的相互制约关系导致了并发程序这种“执行——暂停——执行”这种间断性的活动规律。

## 1.4、操作系统的主要功能和提供的服务

> **处理器管理**：
>
> > 主要任务：对处理器的分配和运行实施有效的管理
> >
> > 基本单位：进程
> >
> > 主要功能：
> >
> > 1. 进程控制
> > 2. 进程同步
> > 3. 进程通信
> > 4. 进程调度
>
> **存储器管理**
>
> > 主要任务：对内存进行分配、保护和扩充
> >
> > 主要功能：
> >
> > 1. 内存分配
> > 2. 内存保护
> > 3. 内存扩充
>
> **设备管理**
>
> > 外设的管理是操作系统最庞杂、随所的部分
> >
> > 主要任务：对计算机系统内的所有设备实施有效管理
> >
> > 主要功能：
> >
> > 1. 文件存储的管理
> > 2. 目录管理
> > 3. 文件操作管理
> > 4. 文件保护
>
> **用户接口**
>
> > 提供三种接口：
> >
> > 1. 命令接口。提供一组命令供用户直接或间接控制自己的作业
> >    1. 联机命令接口又称交互式命令接口，适用于分时或实时操作系统
> >    2. 脱机命令接口又称批处理命令窗口，适用于批处理系统
> > 2. 程序接口。也成为系统调用
> > 3. 图形接口。是联机命令接口的图形化
>
> **操作系统提供的服务**
>
> > 提供了一个用以执行程序的环境，提供的服务有程序执行、I/O操作、文件操作、资源分配与保护、错误检测和排除等。



# 2、操作系统的发展与分类

## 2.1、操作系统的形成与发展

>  **无操作系统**
>
>  > 具有用户独占计算机资源、资源利用率低以及CPU等待等人工操作的特点
>  >
>  > **脱机输入/输出技术**
>  >
>  > **联机输入/输出**：在主机控制下进行
>
>  **单道批处理系统**
>
>  > 对磁带上的作业自动地一个接一个进行处理，直至把磁带上的所有作业全部处理完毕，这样便形成了早起的批处理系统。
>  >
>  > 特点：
>  >
>  > 1. 自动性
>  > 2. 顺序性
>  > 3. 单道性
>
>  **多道批处理系统**
>
>  > 进一步提高CPU的利用率，引入了**多道程序设计技术**，由此形成了多道批处理系统。
>  >
>  > 多道程序设计技术：将一个以上的作业存放在主存中，并且同时处于运行状态。这些作业共享处理器、外设以及其他资源。
>  >
>  > 多道程序运行的特点：
>  >
>  > 1. 多道
>  > 2. 宏观上并行
>  > 3. 微观上串行
>  >
>  > 多道程序设计的问题：
>  >
>  > 1. 如何分配处理器
>  > 2. 如何为每道程序分配必要的内存空间
>  > 3. 如何分配I/O设备
>  > 4. 如何组织程序和数据
>  > 5. 各种应用程序，属于计算型、I/O型，有的作业重要又紧迫，有的作业要求系统能及时响应，这时应如何组织这些作业
>
>  **操作系统的形成**
>
>  > 操作系统是一组控制和管理计算机硬件和软件资源，合理地

## 2.2、操作系统的分类

> 3种基本类型：批处理操作系统、分时操作系统和实时操作系统
>
> **批处理操作系统**：
>
> > 作业：用户在一次解题或一个事务处理过程中要求计算机系统所作工作的集合，包括用户程序、所需的数据及命令等。
> >
> > 主要特点：
> >
> > 1. 用户脱机使用计算机
> > 2. 成批处理
> > 3. 多道程序运行
> >
> > 优点：大大提高了系统资源利用率和作业吞吐量
> >
> > 缺点：无交互性，一旦提交作业，用户就失去了对其运行的控制能力，使用不方便
>
> **分时操作系统**
>
> > 分时技术：把处理器的运行时间分成很短的时间片，按时间片轮流把处理器分配给各联机作业使用
> >
> > 实现分时操作系统方法：
> >
> > 1. 简单分时操作系统。内存只驻留一道作业，其他作业都在外存上。每当内存中的作业运行一个时间片后调出，从外存调入一个作业运行一个时间片。
> > 2. 具有前台后台的分时操作系统。前台存放按时间片调入/调出的作业流，工作方式和简单分时操作系统一样；后台存放批处理作业。当前台正在调入/调出，或无调入/调出作业流时，才运行 后台的批处理作业，并给它分配更长的时间片。
> >
> > 特征：
> >
> > 1. 多路性
> > 2. 交互性
> > 3. 独占性
> > 4. 及时性
>
> **实时操作系统**
>
> > 对外部输入的信息，实时操作系统能在规定的时间内处理完毕并作出反应。
> >
> > 两类实时操作系统：
> >
> > 1. 实时控制系统。实时采集现场数据，及时处理
> > 2. 实时信息处理系统。规定时间内检索和处理，在很短时间内做出响应
>
> 通用操作系统：一个操作系统兼有批处理、分时和实时操作系统或其中两类的功能
>
> **其他操作系统**
>
> > 嵌入式操作系统
> >
> > > 应用平台：电器
> >
> > 集群系统：用来提供可用性，比如集群中某个节点失效，从其他节点可以迅速接替其工作，使用户感受不到中断
> >
> > 网络操作系统
> >
> > > 特点：
> > >
> > > 1. 是一个互连的计算机系统的群体。物理上是分散的
> > > 2. 计算机都是自治的，有自己的操作系统，各自独立工作
> > > 3. 系统互连要通过设施（硬件、软件）来实现
> > > 4. 系统通过通信设施执行信息交换、资源共享、互操作和协作操作，实现多种应用要求
> >
> > **分布式操作系统**
> >
> > > 多个分散的处理单元经互联网络连接而形成的系统
> > >
> > > 特征：
> > >
> > > 1. 统一性
> > > 2. 共享性
> > > 3. 透明性
> > > 4. 自治性
> > >
> > > 优点：分布式，可以用较低的成本获得较高的运算性能；可靠性，当一个CPU系统故障，还能正常工作



# 3、操作系统的运行环境

## 3.1、核心态与用户态

> 核心态：又称管态、系统态，是操作系统执行时机器所处的状态。具有较高的特权，能执行包括特权指令的一切指令，能访问所有寄存器和存储区
>
> 用户态：又称目态，是用户程序执行时机器所处的状态，是具有较低的特权的执行状态，只能执行规定的指令，只能访问规定的存储区和寄存器
>
> 特权指令：只能由操作系统内核部分使用，不允许用户直接使用的指令，如I/O指令、设置中断屏蔽指令、清内存指令、存储保护指令和设置时钟指令。
>
> 内核的指令操作：
>
> 1. 时钟管理。计算机各部分中最关键的设备
> 2. 中断机制
> 3. 原语。一些关闭中断的共用小程序。
>    1. 特点：
>       1. 处于最底层，最接近硬件的部分
>       2. 程序运行具有原子性，操作只能一气呵成
>       3. 这些程序运行的时间短，调用频繁
> 4. 系统控制的数据结构及处理

## 3.2、中断与异常

> 中断：也称外中断，是系统正常功能的一部分。
>
> 异常：也称内中断，是由错误引起的，如文件的损坏、进程越界等、
>
> 通常一场会引起中断，而中断未必是由异常引起的。

## 3.3、系统调用

> 系统调用是操作系统提供的用户接口之一，是由操作系统实现的所有系统调用所构成的集合，即程序接口或应用编程接口，是应用程序同系统之间的接口。



# 4、操作系统之间的体系结构

> 操作系统的体系结构就是操作系统的组成结构。

## 4.1、 模块组合结构

> 优点：结构紧密、接口简单直接、系统的效率相对较高。
>
> 缺点：模块块之间可以随意转接，各模块相互牵连，不容易把握好模块的独立性，导致结构不清晰；这种结构的可扩展性差；这种结构的可适应性差
>
> 适用范围：只适用于系统小、模块少、使用环境比较稳定的系统

## 4.2、层次结构

> 力求使模块之间调用的无序性变为有序，减少了模块调用的无规则性
>
> 按层次结构来设计操作系统，就是将操作系统的所有功能模块按功能的调用次序排列成若干层，使得功能模块之间只存在单向调用和单向依赖。
>
> 优点：模块间的组织和依赖关系清晰明了；系统的可读性、可适应性以及可靠性都得到了增强；对某一层进行修改或替换时，最多只影响到临近的两层，便于修改和扩充。
>
> 缺点：操作系统的各个功能模块应该放在那一层，如何有效进行分层是必须要考虑的问题

## 4.3、微内核结构

> 主要思想：C/S模式
>
> 非常适用于分布式系统
>
> 优点：可靠性好；便于维护；系统具有很好的灵活性；是和分布式处理的计算环境
>
> 缺点：效率不高，微内核成为了系统的瓶颈，尤其是通信频繁的系统



# 5、错题



> - 银行家避免死锁不是不是防止死锁
> - 发生死锁时，无进程处于运行状态，且等待队列不为空
> - 中断发生后，进入中断处理的程序属于操作系统程序（核心态）
> - OS通常为用户提供4种使用接口：终端命令、图标菜单、系统调用、类似DOS的批命令文件或unix的shell文件
> - 缺页处理和时钟中断都是核心态执行的
> - 关中断指令不能在用户态执行
> - 外部中断处理过程，程序计数器的内容由中断隐指令自动保存，通用寄存器的内容由操作系统保存。
> - 中断技术使得多道批处理系统的I/O设备可与CPU并行工作
> - 多重处理即并行处理，多任务处理即多个进程并发执行